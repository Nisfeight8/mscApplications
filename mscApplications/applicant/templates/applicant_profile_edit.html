{% extends 'base.html' %}
{% load i18n %}
{% load static %}
{% load crispy_forms_tags %}
{% load bootstrap5 %}
{% block title %}{% trans "Edit Profile" %}{% endblock title %}
{% block extra_css %}
  <link
	  href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/css/bootstrap-datepicker.standalone.min.css"
	  rel="stylesheet"
  />
  <style>
    .table td, .table th {
    min-width: 150px;
}
  </style>

{% endblock %}
{% block content %}
    <ul class="nav nav-pills flex-column flex-sm-row" id="myTab" role="tablist">
      <li class="nav-item" role="presentation">
        <a
          class="flex-sm-fill text-sm-center nav-link active"
          id="profile-tab"
          data-bs-toggle="tab"
          href="#profile"
          role="tab"
          aria-controls="profile"
          aria-selected="false"
          >{% trans "Profile" %}</a
        >
      </li>
      <li class="nav-item " role="presentation">
        <a
          class="flex-sm-fill text-sm-center nav-link"
          id="diplomas-tab"
          data-bs-toggle="tab"
          href="#diplomas"
          role="tab"
          aria-controls="diplomas"
          aria-selected="false"
          >{% trans "Diplomas" %}</a
        >
      </li>
      <li class="nav-item" role="presentation">
        <a
          class="flex-sm-fill text-sm-center nav-link"
          id="phds-tab"
          data-bs-toggle="tab"
          href="#phds"
          role="tab"
          aria-controls="phds"
          aria-selected="true"
          >{% trans "PHDs" %}</a
        >
      </li>
      <li class="nav-item" role="presentation">
        <a
          class="flex-sm-fill text-sm-center nav-link"
          id="jobexperiences-tab"
          data-bs-toggle="tab"
          href="#jobexperiences"
          role="tab"
          aria-controls="jobexperiences"
          aria-selected="true"
          >{% trans "Job Experiences" %}</a
        >
      </li>
      <li class="nav-item" role="presentation">
        <a
          class="flex-sm-fill text-sm-center nav-link"
          id="references-tab"
          data-bs-toggle="tab"
          href="#references"
          role="tab"
          aria-controls="references"
          aria-selected="true"
          >{% trans "References" %}</a
        >
      </li>
    </ul>
      <form enctype="multipart/form-data" class="tab-content" id="myTabContent" action="." method="post">
        <div
          class="tab-pane fade show active"
          id="profile"
          role="tabpanel"
          aria-labelledby="profile-tab"
        >
          {% csrf_token %}
          {% crispy form %}
        </div>
        {% for formset in inlines %}
          <div
          class="tab-pane fade "
          id="{% if forloop.counter == 1 %}diplomas{% elif forloop.counter == 2 %}phds{% elif forloop.counter == 3 %}jobexperiences{% elif forloop.counter == 4 %}references{% endif %}"
          role="tabpanel"
          aria-labelledby="{% if forloop.counter == 1 %}diplomas-tab{% elif forloop.counter == 2 %}phds-tab{% elif forloop.counter == 3 %}jobexperiences-tab{% elif forloop.counter == 4 %}references-tab{% endif %}"
          >
            <div class="table-responsive">
              <table class="table table-sm" cellpadding="0" cellspacing="5">
                {{ formset.management_form }}
                {{formset.fk.related.get_accessor_name}}
                <thead>
                  <tr>
                      {% for field in formset.forms.0.visible_fields %}
                        <th >{% trans field.label %}</th>
                      {% endfor %}
                  </tr>
                </thead>
                <tbody>
                    {% for form in formset.forms %}
                      <tr class="{{formset.prefix}}">
                        {% for field in form.visible_fields %}
                          <td>
                            {# Include the hidden fields in the form #}
                            {% if forloop.first %}
                              {% for hidden in form.hidden_fields %}
                                {{ hidden }}
                              {% endfor %}
                            {% endif %}
                            {{field|as_crispy_field}}
                          </td>
                        {% endfor %}
                      </tr>
                    {% endfor %}
                </tbody>
              </table>
            </div>
          </div>
        {% endfor%}
        <button type="submit" class="btn msc-color text-white">{% trans "Submit" %}</button>
      </form>
    <br>
    <br>
{% endblock %}
{% block javascript %}
  <script src="{% static '/js/query.formset.js' %}"></script>
  <script type="text/javascript">
    $('.diploma_set').formset({
        addText: 'add another',
        deleteText: 'remove',
        prefix: 'diploma_set',
    });
    $('.phd_set').formset({
        addText: 'add another',
        deleteText: 'remove',
        prefix: 'phd_set',
    });
    $('.jobexperience_set').formset({
        addText: 'add another',
        deleteText: 'remove',
        prefix: 'jobexperience_set',
    });
    $('.reference_set').formset({
        addText: 'add another',
        deleteText: 'remove',
        prefix: 'reference_set',
    });
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/js/bootstrap-datepicker.min.js"></script>
  <script>
    $(".dateinput").datepicker({
      format: 'dd/mm/yyyy',
    });
  </script>
{% endblock %}

