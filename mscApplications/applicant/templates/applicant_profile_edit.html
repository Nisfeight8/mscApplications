{% extends 'base.html' %}
{% load i18n %}

{% load crispy_forms_tags %} {% load static %}
{% block title %}{% trans "Edit Profile" %}{% endblock title %}
{% block content %}

<link
	href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/css/bootstrap-datepicker.standalone.min.css"
	rel="stylesheet" />

    <form enctype="multipart/form-data" class="form-special" action="." method="post">
        <div class="card">
            <div class="card-header text-white bg-info">
              {% trans "Profile" %}
            </div>
            <div class="card-body">
        {% csrf_token %}
      {% crispy form %}
        </div>
        </div>
        <br>
      {% for formset in inlines %}
      <div class="card">
        <div class="card-header text-white bg-info">
          {% if forloop.counter == 1 %}
          {% trans "Diplomas" %}
          {% elif forloop.counter == 2 %}
            {% trans "PHDs" %}
        {% elif forloop.counter == 3 %}
            {% trans "Job Experiences" %}
        {% elif forloop.counter == 4 %}
            {% trans "References" %}
          {%endif%}
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table align-items-center table-sm">
            {{ formset.management_form|crispy }}
            {{formset.fk.related.get_accessor_name}}
            <thead>
            <tr>
                {% for field in formset.forms.0.visible_fields %}
            <th >
             {% trans field.label %}
            </th>
            {% endfor %}
            </tr>
            </thead>

              <tbody>
                {% for form in formset.forms %}
              <tr class="{{formset.prefix}}">
                    {% for field in form.visible_fields %}
                            <td>
                                {# Include the hidden fields in the form #}
                                {% if forloop.first %}
                                    {% for hidden in form.hidden_fields %}
                                        {{ hidden }}
                                    {% endfor %}
                                {% endif %}
                                {{ field|as_crispy_field }}
                            </td>
                            {% endfor %}
                        </tr>
                        {% endfor %}
                    </tbody>
            </table>
            </div>
            </div>
      </div>
      <br>
      {% endfor%}
      <button type="submit" class="btn btn-info">{% trans "Submit" %}</button>
    </form>
            <br>
            <br>

      <script src="{% static '/js/query.formset.js' %}">
      </script>
      <script type="text/javascript">
      $('.diploma_set').formset({
              addText: 'add another',
              deleteText: 'remove',
              prefix: 'diploma_set',
      });
      $('.phd_set').formset({
              addText: 'add another',
              deleteText: 'remove',
              prefix: 'phd_set',
      });
      $('.jobexperience_set').formset({
              addText: 'add another',
              deleteText: 'remove',
              prefix: 'jobexperience_set',
      });
      $('.reference_set').formset({
              addText: 'add another',
              deleteText: 'remove',
              prefix: 'reference_set',
      });
      </script>
      <script
      src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/js/bootstrap-datepicker.min.js"></script>
      <script>
        $(".dateinput").datepicker({
          format: 'dd/mm/yyyy',
    });
      </script>
{% endblock %}

