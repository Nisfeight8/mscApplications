{% extends 'base.html' %}
{% load static %}
{% load i18n %}
{% block title %} {% trans "Applications" %}{% endblock title %}
{% block extra_css %}
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.21/css/dataTables.bootstrap4.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.15/css/jquery.dataTables.min.css"></link>
{% endblock %}
{% block content %}
    {% get_current_language as LANGUAGE_CODE %}
    <div class="row">
        <div class="col-sm-3">
            <div class=card>
                <div class="card-header text-white msc-color">
                    <h6 style="display: inline">
                        {% if LANGUAGE_CODE == 'el-gr' %}
                            {{ call.title_el_GR }}
                        {% else %}
                            {{ call.title }}
                        {% endif %}
                    </h6>
                </div>
                <div class="card-body">
                    <div class="list-group list-group-flush" id="list-tab" role="tablist">
                        <a class="list-group-item list-group-item-action " id="list-call-list" data-bs-toggle="list" href="#list-call" role="tab" aria-controls="list-call">{% trans "Call" %}</a>
                        <a class="list-group-item list-group-item-action" id="list-msc-list" data-bs-toggle="list" href="#list-msc" role="tab" aria-controls="list-msc">{% trans "Programme" %}</a>
                        <a class="list-group-item list-group-item-action" id="list-flows-list" data-bs-toggle="list" href="#list-flows" role="tab" aria-controls="list-flows">{% trans "Flows" %}</a>
                        <a class="list-group-item list-group-item-action" id="list-department-list" data-bs-toggle="list" href="#list-department" role="tab" aria-controls="list-department">{% trans "Department" %}</a>
                        <a class="list-group-item list-group-item-action" id="list-institution-list" data-bs-toggle="list" href="#list-institution" role="tab" aria-controls="list-institution">{% trans "Institution" %}</a>
                        <a class="list-group-item list-group-item-action active" id="list-apps-list" data-bs-toggle="list" href="#list-apps" role="tab" aria-controls="list-apps">{% trans "Applications" %}</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-9">
            <div class="tab-content" id="nav-tabContent">
                <div class="tab-pane fade " id="list-call" role="tabpanel" aria-labelledby="list-call-list">
                    <div class="card">
                        <div class="card-header msc-color text-white">
                            <h5 style="display: inline">
                              {% if LANGUAGE_CODE == 'el-gr' %}
                                {{ call.title_el_GR }}
                              {% else %}
                                {{ call.title }}
                              {% endif %}
                              </h5>
                        </div>
                        <div class="card-body">
                              <p><strong>{% trans "Start Date" %}:</strong> {{ call.start_date }}</p>
                              <p><strong>{% trans "End Date" %}:</strong> {{ call.end_date }}</p>
                              <p><strong>{% trans "Msc Programme" %}:</strong>
                                {% if LANGUAGE_CODE == 'el-gr' %}
                                  {{ call.msc_programme.title_el_GR }}
                                {% else %}
                                  {{ call.msc_programme }}
                                {% endif %}
                              </p>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="list-msc" role="tabpanel" aria-labelledby="list-msc-list">
                    <div class="card">
                        <div class="card-header msc-color text-white">
                            <h5 style="display: inline">
                                {% if LANGUAGE_CODE == 'el-gr' %}
                                    {{call.msc_programme.title_el_GR}}
                                {% else %}
                                    {{call.msc_programme.title}}
                                {% endif %}
                            </h5>
                        </div>
                        <div class="card-body">
                            <p><strong>{% trans "Country" %}:</strong>
                                {% if LANGUAGE_CODE == 'el-gr' %}
                                    {{call.msc_programme.country_el_GR}}
                                {% else %}
                                    {{call.msc_programme.country}}
                                {% endif %}
                            </p>
                            <p><strong>{% trans "City" %}:</strong>
                                {% if LANGUAGE_CODE == 'el-gr' %}
                                    {{call.msc_programme.city_el_GR}}
                                {% else %}
                                    {{call.msc_programme.city}}
                                {% endif %}
                            </p>
                            <p><strong>{% trans "Address" %}:</strong>
                                {% if LANGUAGE_CODE == 'el-gr' %}
                                    {{call.msc_programme.address_el_GR}}
                                {% else %}
                                    {{call.msc_programme.address}}
                                {% endif %}
                            </p>
                            <p><strong>{% trans "Pobox" %}:</strong> {{call.msc_programme.pobox }}</p>
                            <p><strong>{% trans "Telephone" %}:</strong> {{call.msc_programme.telephone }}</p>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="list-flows" role="tabpanel" aria-labelledby="list-flows-list">
                    <div class="card">
                        <div class="card-header msc-color text-white">
                            <h5 style="display: inline">
                                {% if LANGUAGE_CODE == 'el-gr' %}
                                    {{call.msc_programme.title_el_GR}}
                                {% else %}
                                    {{call.msc_programme.title}}
                                {% endif %}
                                {% trans "Flows" %}
                            </h5>
                        </div>
                        <div class="card-body">
                            {% for flow in msc_flows %}
                                <p><strong>{{forloop.counter}} :</strong>
                                    {% if LANGUAGE_CODE == 'el-gr' %}
                                        {{flow.title_el_GR}}
                                    {% else %}
                                        {{flow.title}}
                                    {% endif %}
                                </p>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="list-department" role="tabpanel" aria-labelledby="list-department-list">
                    <div class="card">
                        <div class="card-header msc-color text-white">
                            <h5 style="display: inline">
                                {% if LANGUAGE_CODE == 'el-gr' %}
                                    {{call.msc_programme.department.title_el_GR}}
                                {% else %}
                                    {{call.msc_programme.department.title}}
                                {% endif %}
                            </h5>
                        </div>
                        <div class="card-body">
                            <p><strong>{% trans "Country" %}:</strong>
                                {% if LANGUAGE_CODE == 'el-gr' %}
                                    {{call.msc_programme.department.country_el_GR}}
                                {% else %}
                                    {{call.msc_programme.department.country}}
                                {% endif %}
                            </p>
                            <p><strong>{% trans "City" %}:</strong>
                                {% if LANGUAGE_CODE == 'el-gr' %}
                                    {{call.msc_programme.department.city_el_GR}}
                                {% else %}
                                    {{call.msc_programme.department.city}}
                                {% endif %}
                            </p>
                            <p><strong>{% trans "Address" %}:</strong>
                                {% if LANGUAGE_CODE == 'el-gr' %}
                                    {{call.msc_programme.department.address_el_GR}}
                                {% else %}
                                    {{call.msc_programme.department.address}}
                                {% endif %}
                            </p>
                            <p><strong>{% trans "Pobox" %}:</strong> {{call.msc_programme.department.pobox }}</p>
                            <p><strong>{% trans "Telephone" %}:</strong> {{call.msc_programme.department.telephone }}</p>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="list-institution" role="tabpanel" aria-labelledby="list-institution-list">
                    <div class="card">
                        <div class="card-header msc-color text-white">
                            <h5 style="display: inline">
                                {% if LANGUAGE_CODE == 'el-gr' %}
                                    {{call.msc_programme.department.institution.title_el_GR}}
                                {% else %}
                                    {{call.msc_programme.department.institution.title}}
                                {% endif %}
                            </h5>
                        </div>
                        <div class="card-body">
                            <p><strong>{% trans "Country" %}:</strong>
                                {% if LANGUAGE_CODE == 'el-gr' %}
                                    {{call.msc_programme.department.institution.country_el_GR}}
                                {% else %}
                                    {{call.msc_programme.department.institution.country}}
                                {% endif %}
                            </p>
                            <p><strong>{% trans "City" %}:</strong>
                                {% if LANGUAGE_CODE == 'el-gr' %}
                                    {{call.msc_programme.department.institution.city_el_GR}}
                                {% else %}
                                    {{call.msc_programme.department.institution.city}}
                                {% endif %}
                            </p>
                            <p><strong>{% trans "Address" %}:</strong>
                                {% if LANGUAGE_CODE == 'el-gr' %}
                                    {{call.msc_programme.department.institution.address_el_GR}}
                                {% else %}
                                    {{call.msc_programme.department.institution.address}}
                                {% endif %}
                            </p>
                            <p><strong>{% trans "Pobox" %}:</strong> {{call.msc_programme.department.institution.pobox }}</p>
                            <p><strong>{% trans "Telephone" %}:</strong> {{call.msc_programme.department.institution.telephone }}</p>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade show active" id="list-apps" role="tabpanel" aria-labelledby="list-apps-list">
                    <div class="card">
                        <div class="card-header msc-color text-white">
                            {% trans "Applications" %}
                        </div>
                        <div class="card-body table-responsive">
                            <table id="datatable" class="table align-items-center table-flush">
                                <thead class="bg-light">
                                    <tr>
                                        <th scope="col">{% trans "Applicant" %}</th>
                                        <th scope="col">{% trans "Submission Date" %}</th>
                                        <th scope="col">{% trans "Admitted" %}</th>
                                        <th scope="col">{% trans "Actions" %}</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for app in applications %}
                                        <tr>
                                            <td><a href="{% url 'evaluator:applicant_detail'  app.applicant.pk  %}">{{app.applicant}}</a></td>
                                            <td>{{app.submission_date}}</td>
                                            <td>
                                            {% if app.admitted == None %}
                                            {% trans "Pending" %}
                                            {% elif app.admitted == True %}
                                            {% trans "Yes" %}
                                            {% else %}
                                            {% trans "No" %}
                                            {% endif %}
                                            </td>
                                            <td>
                                                <a class="btn msc-color text-white" href="{% url 'evaluator:application_update'  app.pk  %}">{% trans "Admit" %}</a>
                                            </td>
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock content %}
{% block javascript %}
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.21/js/dataTables.bootstrap4.min.js"></script>
    <script type="text/javascript">
        $('#datatable').DataTable({
            "ordering" : false,
        });
    </script>
{% endblock %}